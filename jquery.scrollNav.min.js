(function(e){e.fn.scrollNav=function(t){var n=e.extend({sections:"h2",subSections:!1,showHeadline:!0,headlineText:"Scroll To",showTopLink:!0,topLinkText:"Top",fixedMargin:40,animated:!0,speed:500,location:"insertBefore"},t),r=[],i=[],s=this,o=e("<span />",{"class":"scroll-nav__heading",text:n.headlineText}),u=n.showHeadline===!0?e("<nav />",{"class":"scroll-nav",role:"navigation"}).append(o):e("<nav />",{"class":"scroll-nav",role:"navigation"}),a=function(){e("body").addClass("sn-loading")},f=function(t){t?e("body").removeClass("sn-loading").addClass("sn-active"):e("body").removeClass("sn-loading").addClass("sn-failed")},l=function(){n.showTopLink&&r.push(s.children().first().nextUntil(n.sections).andSelf());s.find(n.sections).each(function(){r.push(e(this).nextUntil(n.sections).andSelf())})},c=function(){e(r).each(function(t){var r=[],s=e(this),o="scrollNav-"+(t+1),u=s.offset().top,a=n.showTopLink&&t===0?n.topLinkText:s.filter(n.sections).text();if(n.subSections){var f=s.filter(n.subSections);if(f.length>0){f.each(function(t){var n=o+"-"+(t+1),i=e(this).offset().top,u=e(this).text(),a=s.filter(e(this).nextUntil(f).andSelf());a.wrapAll('<div id="'+n+'" class="scroll-nav__sub-section" />');r.push({id:n,offset:i,text:u})});s=e(this).nextUntil(n.sections).andSelf()}}s.wrapAll('<section id="'+o+'" />');i.push({id:o,offset:u,text:a,subSections:r})})},h=function(){var t=e("<ol />",{"class":"scroll-nav__list"});e.each(i,function(n){var r=n===0?e("<li />",{"class":"scroll-nav__item active"}):e("<li />",{"class":"scroll-nav__item"}),i=e("<a />",{href:"#"+this.id,"class":"scroll-nav__link",text:this.text}),s;if(this.subSections.length>0){r.addClass("is-parent-item");s=e("<ol />",{"class":"scroll-nav__sub-list"});e.each(this.subSections,function(){var t=e("<li />",{"class":"scroll-nav__sub-item"}),n=e("<a />",{href:"#"+this.id,"class":"scroll-nav__sub-link",text:this.text});s.append(t.append(n))})}t.append(r.append(i).append(s))});n.showHeadline===!0?u.append(o).append(t):u.append(t)},p=function(){var t=u.offset().top;e(window).resize(function(){e.each(i,function(){this.offset=e("#"+this.id).offset().top})});e(window).scroll(function(){var r=e(window).scrollTop(),s=e(window).height()*.5;r>t-n.fixedMargin?u.addClass("fixed"):u.removeClass("fixed");e.each(i,function(){if(this.offset>r-n.fixedMargin&&this.offset<r+s){u.find("li").removeClass("active");u.find('a[href="#'+this.id+'"]').parents("li").addClass("active")}})})},d=function(){n.animated===!0&&e(".scroll-nav").find("a").click(function(t){t.preventDefault();var r=e(this).attr("href"),i=e(r).offset().top;e("html:not(:animated),body:not(:animated)").animate({scrollTop:i-40},n.speed)})};if(s.length>0){a();l();if(s.find(n.sections).length>0){c();h();u[n.location](s);p();d();f(!0)}else{console.log('Build failed, scrollNav could not find any "'+n.sections+"'s inside of \""+s.selector+'"');f(!1)}}else{console.log('Build failed, scrollNav could not find "'+s.selector+'"');f(!1)}}})(jQuery);