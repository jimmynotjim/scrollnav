{"version":3,"file":"scrollNav.min.umd.js","sources":["../src/util/extend.js","../src/util/getOrSetID.js","../src/util/getYPosition.js","../src/util/nextUntil.js","../src/util/populateSectionData.js","../src/util/createList.js","../src/util/createNav.js","../src/util/insertNav.js","../src/util/updatePositionData.js","../src/util/insertVisualDebugger.js","../src/util/getTargetYPosition.js","../src/util/calculateScrollDuration.js","../src/util/easing.js","../src/scrollTo.js","../src/setupClickHandlers.js","../src/util/getActiveSection.js","../src/util/updateActiveNavItem.js","../src/setupScrollHandler.js","../src/setupResizeHandler.js","../src/teardownClickHandlers.js","../src/teardownScrollHandler.js","../src/teardownResizeHandler.js","../src/scrollNav.js"],"sourcesContent":["/* Borrowed from https://gist.github.com/cferdinandi/4f8a0e17921c5b46e6c4 */\n\nexport default function extend(defaults, options) {\n  const extended = {};\n  let prop;\n\n  for (prop in defaults) {\n    if (Object.prototype.hasOwnProperty.call(defaults, prop)) {\n      extended[prop] = defaults[prop];\n    }\n  }\n\n  for (prop in options) {\n    if (Object.prototype.hasOwnProperty.call(options, prop)) {\n      extended[prop] = options[prop];\n    }\n  }\n\n  return extended;\n}\n","export default function getOrSetID(elem, setID) {\n  if (typeof elem !== 'object') {\n    return Promise.reject(new Error('First argument must be an object'));\n  }\n\n  let id = elem.id;\n\n  if (!id) {\n    if (typeof setID !== 'string') {\n      return Promise.reject(new Error('Second argument must be a string'));\n    }\n\n    id = setID;\n    elem.id = id;\n  }\n  return id;\n}\n","export default function getYPosition(elem, parent) {\n  if (typeof elem !== 'object') {\n    return Promise.reject(new Error('First argument must be an object'));\n  }\n\n  parent = parent || document.body;\n  if (typeof parent !== 'object') {\n    return Promise.reject(new Error('Second argument must be an object'));\n  }\n\n  const bodyRect = parent.getBoundingClientRect();\n  const elemRect = elem.getBoundingClientRect();\n\n  return elemRect.top - bodyRect.top;\n}\n","/* Borrowed from https://github.com/cferdinandi/nextUntil */\n\nexport default function nextUntil(elem, selector, filter) {\n  var siblings = [];\n\n  elem = elem.nextElementSibling;\n\n  while (elem) {\n    if (elem.matches(selector)) break;\n\n    if (filter && !elem.matches(filter)) {\n      elem = elem.nextElementSibling;\n      continue;\n    }\n\n    siblings.push(elem);\n\n    elem = elem.nextElementSibling;\n  }\n\n  return siblings;\n}\n","import getOrSetID from './getOrSetID';\nimport getYPosition from './getYPosition';\nimport nextUntil from './nextUntil';\n\nexport default function populateSectionData(\n  sections,\n  settings,\n  prefix = 'scroll-nav'\n) {\n  const sectionData = [];\n  prefix = prefix + '__';\n\n  sections.forEach((elem, i) => {\n    let subSectionData = [];\n    const id = getOrSetID(elem, prefix + (i + 1));\n\n    if (settings.subSections && elem.matches(settings.sections)) {\n      const subSectionDom = nextUntil(\n        elem,\n        settings.sections,\n        settings.subSections\n      );\n      subSectionData = populateSectionData(subSectionDom, settings, id);\n    }\n\n    sectionData.push({\n      id: id,\n      text: elem.innerText || elem.textContent,\n      offsetTop: getYPosition(elem),\n      subSections: subSectionData\n    });\n  });\n\n  return sectionData;\n}\n","export default function createList(data, isSubList = false) {\n  const suffix = isSubList ? '__sub-' : '__';\n  const baseClass = 'scroll-nav' + suffix;\n\n  const itemsMarkup = `\n    ${data\n      .map(\n        item =>\n          `<li class=\"${baseClass}item\" data-sn-section=\"${item.id}\">\n            <a class=\"${baseClass}link\" href=\"#${item.id}\">${item.text}</a>\n            ${\n              item.subSections && item.subSections.length\n                ? `${createList(item.subSections, true)}`\n                : ''\n            }\n          </li>`\n      )\n      .join('')}\n  `;\n\n  const list = `\n    <ol class=\"${baseClass}list\">\n      ${itemsMarkup}\n    </ol>\n  `;\n\n  return list;\n}\n","import createList from './createList';\n\nexport default function createNav(data) {\n  const nav = document.createElement('nav');\n  nav.className = 'scroll-nav';\n  nav.innerHTML = createList(data);\n\n  return nav;\n}\n","export default function insertNav(scrollNav) {\n  const target = scrollNav.settings.insertTarget;\n  const location = scrollNav.settings.insertLocation;\n\n  if (location === 'append') {\n    target.appendChild(scrollNav.nav);\n  } else if (location === 'prepend') {\n    target.insertBefore(scrollNav.nav, target.firstChild);\n  } else if (location === 'before') {\n    target.parentNode.insertBefore(scrollNav.nav, target);\n  } else if (location === 'after') {\n    target.parentNode.insertBefore(scrollNav.nav, target.nextSibling);\n  }\n}\n","import getYPosition from './getYPosition';\n\nexport default function updatePositionData(data) {\n  data.forEach(section => {\n    const sectionDom = document.querySelector(`#${section.id}`);\n    section.offsetTop = getYPosition(sectionDom);\n\n    if (section.subSections.length) {\n      section.subSections = updatePositionData(section.subSections);\n    }\n  });\n\n  return data;\n}\n","export default function insertVisualDebugger() {\n  const snDebugger = document.createElement('div');\n  snDebugger.className = 'snDebugger';\n\n  snDebugger.setAttribute(\n    'style',\n    `\n      position: fixed;\n      top: 8.33333%;\n      height: 33.33333%;\n      background: red;\n      width: 100%;\n      opacity: .25;\n      pointer-events: none;\n    `\n  );\n\n  document.body.appendChild(snDebugger);\n}\n","export default function getTargetYPosition(target, data) {\n  let id = target.getAttribute('href');\n  if (id.charAt(0) === '#') {\n    id = id.substr(1);\n  }\n\n  const targetSection = filterData(data, id);\n\n  return targetSection.offsetTop;\n}\n\nfunction filterData(data, id) {\n  let targetSection;\n\n  data.forEach(section => {\n    if (section.id === id) {\n      targetSection = section;\n    }\n\n    if (section.subSections && targetSection === undefined) {\n      targetSection = filterData(section.subSections, id);\n    }\n  });\n\n  return targetSection;\n}\n","export default function calculateScrollDuration(distance) {\n  const halfDistance = Math.abs(distance / 2);\n\n  return Math.min(Math.max(halfDistance, 250), 1200);\n}\n","/* Borrowed from https://gist.github.com/gre/1650294#gistcomment-1806616 */\n\nconst easeIn = p => t => Math.pow(t, p);\nconst easeOut = p => t => 1 - Math.abs(Math.pow(t - 1, p));\nconst easeInOut = p => t =>\n  t < 0.5 ? easeIn(p)(t * 2) / 2 : easeOut(p)(t * 2 - 1) / 2 + 0.5;\n\nconst easing = {\n  linear: easeInOut(1),\n  easeInQuad: easeIn(2),\n  easeOutQuad: easeOut(2),\n  easeInOutQuad: easeInOut(2),\n  easeInCubic: easeIn(3),\n  easeOutCubic: easeOut(3),\n  easeInOutCubic: easeInOut(3),\n  easeInQuart: easeIn(4),\n  easeOutQuart: easeOut(4),\n  easeInOutQuart: easeInOut(4),\n  easeInQuint: easeIn(5),\n  easeOutQuint: easeOut(5),\n  easeInOutQuint: easeInOut(5)\n};\n\nexport { easing };\n","import calculateScrollDuration from './util/calculateScrollDuration';\nimport calculateEasedTimes from './util/calculateEasedTimes';\nimport { easing } from './util/easing';\n\n/* istanbul ignore next */\nexport default function scrollTo(targetPosition, easingStyle) {\n  return new Promise(async (resolve, reject) => {\n    if (typeof targetPosition !== 'number') {\n      return reject(new Error('First argument must be a number'));\n    }\n\n    easingStyle = easingStyle || 'linear';\n    if (typeof easingStyle !== 'string') {\n      return reject(new Error('Second argument must be a string'));\n    }\n\n    const startingPosition = window.pageYOffset;\n    const distance = targetPosition - startingPosition;\n    const duration = await calculateScrollDuration(distance);\n    const framerate = 50;\n    const increment = 1000 / framerate;\n    let ellapsedTime = 0;\n    let easedTime;\n    let next;\n\n    function animateScroll() {\n      ellapsedTime += increment;\n      easedTime = easing[easingStyle](ellapsedTime / duration);\n      next = easedTime * distance + startingPosition;\n      window.scroll(0, next);\n\n      if (ellapsedTime < duration) {\n        setTimeout(animateScroll, increment);\n      } else {\n        resolve();\n      }\n    }\n\n    animateScroll();\n  });\n}\n","import getTargetYPosition from './util/getTargetYPosition';\nimport scrollTo from './scrollTo';\n\nexport default function setupClickHandlers(scrollNav) {\n  function clickHandler(event) {\n    event.preventDefault();\n\n    const activeArea = window.innerHeight / 3;\n    const targetYPosition = getTargetYPosition(event.target, scrollNav.data);\n    const scrollYTarget = targetYPosition - activeArea;\n\n    scrollTo(scrollYTarget, 'easeOutQuad').then(scrollNav.settings.onScroll());\n  }\n\n  const links = scrollNav.nav.querySelectorAll('a');\n  links.forEach(link => {\n    link.addEventListener('click', clickHandler);\n  });\n\n  return clickHandler;\n}\n","export default function getActiveSection(data, boundryTop, boundryBottom) {\n  let activeSection;\n\n  data.forEach(section => {\n    if (section.offsetTop > boundryBottom) {\n      if (!activeSection && section.offsetTop < boundryTop) {\n        activeSection = section;\n      }\n    } else {\n      activeSection = section;\n    }\n  });\n\n  if (activeSection && activeSection.subSections.length) {\n    let activeSubSection;\n\n    activeSubSection = getActiveSection(\n      activeSection.subSections,\n      boundryTop,\n      boundryBottom\n    );\n\n    if (activeSubSection) {\n      activeSection = activeSubSection;\n    }\n  }\n\n  return activeSection;\n}\n","export default function updateActiveNavItem(activeSection, nav) {\n  const previousActive = nav.querySelector('[data-sn-active]');\n\n  if (!activeSection) {\n    if (previousActive) {\n      previousActive.classList.remove('scroll-nav__item--active');\n      previousActive.removeAttribute('data-sn-active');\n    }\n\n    return;\n  }\n\n  const newActive = nav.querySelector(\n    '[data-sn-section=' + activeSection.id + ']'\n  );\n\n  if (newActive && newActive !== previousActive) {\n    if (previousActive) {\n      previousActive.classList.remove('scroll-nav__item--active');\n      previousActive.removeAttribute('data-sn-active');\n    }\n    newActive.classList.add('scroll-nav__item--active');\n    newActive.setAttribute('data-sn-active', true);\n  }\n}\n","import getActiveSection from './util/getActiveSection';\nimport updateActiveNavItem from './util/updateActiveNavItem';\n\nexport default function setupScrollHandler(scrollNav) {\n  function scrollHandler() {\n    const top = window.scrollY || window.pageYOffset || document.body.scrollTop;\n    const boundryTop = top + 10;\n    const boundryBottom = window.innerHeight / 3;\n    const activeSection = getActiveSection(\n      scrollNav.data,\n      boundryTop,\n      boundryBottom\n    );\n\n    updateActiveNavItem(activeSection, scrollNav.nav);\n\n    return activeSection;\n  }\n\n  window.addEventListener('scroll', scrollHandler);\n\n  return scrollHandler;\n}\n","import updatePositionData from './util/updatePositionData';\n\nexport default function setupResizeHandler(scrollNav) {\n  function resizeHandler() {\n    scrollNav.data = updatePositionData(scrollNav.data);\n  }\n\n  window.addEventListener('resize', resizeHandler);\n\n  return resizeHandler;\n}\n","export default function teardownClickHandlers(nav, clickHandler) {\n  const links = nav.querySelectorAll('a');\n  links.forEach(link => {\n    link.removeEventListener('click', clickHandler);\n  });\n}\n","export default function teardownScrollHandler(scrollHandler) {\n  window.removeEventListener('scroll', scrollHandler);\n}\n","export default function teardownResizelHandler(resizeHandler) {\n  window.removeEventListener('resize', resizeHandler);\n}\n","/*\n * scrollNav\n * http://scrollnav.com\n *\n * Copyright (c) 2013-2018 James Wilson\n * Licensed under the MIT license.\n */\n\nimport extend from './util/extend';\nimport populateSectionData from './util/populateSectionData';\nimport createNav from './util/createNav';\nimport insertNav from './util/insertNav';\nimport updatePositionData from './util/updatePositionData';\nimport insertVisualDebugger from './util/insertVisualDebugger';\nimport setupClickHandlers from './setupClickHandlers';\nimport setupScrollHandler from './setupScrollHandler';\nimport setupResizeHandler from './setupResizeHandler';\nimport teardownClickHandlers from './teardownClickHandlers';\nimport teardownScrollHandler from './teardownScrollHandler';\nimport teardownResizeHandler from './teardownResizeHandler';\n\nlet clickHandler;\nlet scrollHandler;\nlet resizeHandler;\n\n// matches() polyfill\n/* istanbul ignore next */\nif (!Element.prototype.matches) {\n  Element.prototype.matches =\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.webkitMatchesSelector;\n}\n\nfunction isElement(element) {\n  return element instanceof Element;\n}\n\nfunction init(elem, options) {\n  const defaults = {\n    sections: 'h2',\n    insertTarget: elem,\n    insertLocation: 'before'\n  };\n  this.settings = extend(defaults, options);\n  const locationOptions = ['append', 'prepend', 'after', 'before'];\n\n  if (!isElement(elem)) {\n    if (this.settings.debug) {\n      console.error(`\n        scrollNav build failed, content argument \"${elem}\" is not an HTML Element\n      `);\n    }\n    return;\n  }\n\n  if (this.settings.insertTarget && !isElement(this.settings.insertTarget)) {\n    if (this.settings.debug) {\n      console.error(`\n        scrollNav build failed, options.insertTarget \"${elem}\" is not an HTML Element\n      `);\n    }\n    return;\n  }\n\n  if (locationOptions.indexOf(this.settings.insertLocation) < 1) {\n    if (this.settings.debug) {\n      console.error(`\n        scrollNav build failed, options.insertLocation \"${\n          this.settings.insertLocation\n        }\" is not a valid option\n      `);\n    }\n    return;\n  }\n\n  const sectionsDom = elem.querySelectorAll(this.settings.sections);\n\n  if (!sectionsDom.length) {\n    if (this.settings.debug) {\n      console.error(`\n        scrollNav build failed, could not find any \"${this.settings.sections}\"\n        elements inside of \"${elem}\"\n      `);\n    }\n    return;\n  }\n\n  this.data = populateSectionData(sectionsDom, this.settings);\n  this.nav = createNav(this.data);\n\n  insertNav(this);\n  clickHandler = setupClickHandlers(this);\n  scrollHandler = setupScrollHandler(this);\n  resizeHandler = setupResizeHandler(this);\n\n  if (this.settings.debug) insertVisualDebugger();\n  if (this.settings.onInit) return this.settings.onInit();\n}\n\nfunction destroy(options) {\n  this.settings = extend(this.settings, options);\n\n  teardownClickHandlers(this.nav, clickHandler);\n  teardownScrollHandler(scrollHandler);\n  teardownResizeHandler(resizeHandler);\n  this.nav.remove();\n\n  if (this.settings.onDestroy) return this.settings.onDestroy();\n}\n\nfunction updatePositions(options) {\n  this.settings = extend(this.settings, options);\n  this.data = updatePositionData(this.data);\n\n  if (this.settings.onUpdatePositions) return this.settings.onUpdatePositions();\n}\n\nconst scrollNav = {\n  init: init,\n  destroy: destroy,\n  updatePositions: updatePositions\n};\n\nexport default scrollNav;\n"],"names":["const","let","teardownResizeHandler"],"mappings":"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"}